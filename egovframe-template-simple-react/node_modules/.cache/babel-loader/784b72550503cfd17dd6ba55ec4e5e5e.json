{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiflis\\\\Documents\\\\eGovFrameDev-4.0.0-64bit\\\\workspace\\\\newcc\\\\egovframe-template-simple-react\\\\src\\\\egov\\\\common\\\\EgovAttachFile.jsx\";\nimport React from 'react';\nimport * as EgovNet from 'context/egovFetch';\nimport { SERVER_URL } from 'context/config';\nimport CODE from 'context/code';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EgovAttachFile(_ref) {\n  let {\n    boardFiles,\n    mode,\n    fnChangeFile,\n    fnDeleteFile\n  } = _ref;\n  console.groupCollapsed(\"EgovAttachFile\");\n\n  function onClickDownFile(atchFileId, fileSn) {\n    window.open(SERVER_URL + \"/cmm/fms/FileDown.do?atchFileId=\" + atchFileId + \"&fileSn=\" + fileSn + \"\");\n  }\n\n  function onClickDeleteFile(atchFileId, fileSn, fileIndex) {\n    console.log(\"onClickDeleteFile Params : \", atchFileId, fileSn, fileIndex);\n    const formData = new FormData();\n    formData.set(\"atchFileId\", atchFileId);\n    formData.set(\"fileSn\", fileSn);\n    const requestOptions = {\n      method: \"POST\",\n      headers: {//'Content-type': 'multipart/form-data'\n      },\n      body: formData\n    };\n    EgovNet.requestFetch(\"/cmm/fms/deleteFileInfsAPI.do\", requestOptions, function (resp) {\n      console.log(\"===>>> board file delete= \", resp);\n\n      if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\n        // 성공\n        console.log(\"Deleted fileIndex = \", fileIndex);\n\n        const _deleteFile = boardFiles.splice(fileIndex, 1);\n\n        const _boardFiles = Object.assign([], boardFiles);\n\n        fnDeleteFile(_boardFiles);\n        alert(\"첨부파일이 삭제되었습니다.\");\n        fnChangeFile({});\n      } else {\n        alert(\"ERR : \" + resp.resultMessage);\n      }\n    });\n  }\n\n  function onChangeFileInput(e) {\n    console.log(\"===>>> e = \" + e.target.files[0]);\n    fnChangeFile(e.target.files[0]);\n  }\n\n  let filesTag = [];\n\n  if (boardFiles !== undefined) {\n    boardFiles.forEach(function (item, index) {\n      filesTag.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#LINK\",\n            onClick: function (e) {\n              e.preventDefault();\n              onClickDownFile(item.atchFileId, item.fileSn);\n            },\n            download: true,\n            children: item.orignlFileNm\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"[\", item.fileMg, \"byte]\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false));\n\n      if (mode === CODE.MODE_MODIFY) {\n        filesTag.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn_delete\",\n            onClick: e => {\n              onClickDeleteFile(item.atchFileId, item.fileSn, index);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)\n        }, void 0, false));\n      }\n\n      filesTag.push( /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 27\n      }, this));\n    });\n  }\n\n  console.log(\"filesTag : \", filesTag);\n  console.groupEnd(\"EgovAttachFile\");\n  return /*#__PURE__*/_jsxDEV(\"dl\", {\n    children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n      children: \"\\uCCA8\\uBD80\\uD30C\\uC77C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"file_attach\",\n        children: [filesTag, (mode === CODE.MODE_MODIFY || mode === CODE.MODE_CREATE) && /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"file_0\",\n          id: \"egovComFileUploader\",\n          type: \"file\",\n          onChange: e => onChangeFileInput(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 82\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n\n_c = EgovAttachFile;\nexport default _c2 = /*#__PURE__*/React.memo(EgovAttachFile);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EgovAttachFile\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/Tiflis/Documents/eGovFrameDev-4.0.0-64bit/workspace/newcc/egovframe-template-simple-react/src/egov/common/EgovAttachFile.jsx"],"names":["React","EgovNet","SERVER_URL","CODE","EgovAttachFile","boardFiles","mode","fnChangeFile","fnDeleteFile","console","groupCollapsed","onClickDownFile","atchFileId","fileSn","window","open","onClickDeleteFile","fileIndex","log","formData","FormData","set","requestOptions","method","headers","body","requestFetch","resp","Number","resultCode","RCV_SUCCESS","_deleteFile","splice","_boardFiles","Object","assign","alert","resultMessage","onChangeFileInput","e","target","files","filesTag","undefined","forEach","item","index","push","preventDefault","orignlFileNm","fileMg","MODE_MODIFY","groupEnd","MODE_CREATE","memo"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport * as EgovNet from 'context/egovFetch';\r\nimport { SERVER_URL } from 'context/config';\r\nimport CODE from 'context/code';\r\n\r\nfunction EgovAttachFile({ boardFiles, mode, fnChangeFile, fnDeleteFile }) {\r\n    console.groupCollapsed(\"EgovAttachFile\");\r\n\r\n\r\n    function onClickDownFile(atchFileId, fileSn) {\r\n        window.open(SERVER_URL + \"/cmm/fms/FileDown.do?atchFileId=\" + atchFileId + \"&fileSn=\" + fileSn + \"\");\r\n    }\r\n\r\n    function onClickDeleteFile(atchFileId, fileSn, fileIndex) {\r\n        console.log(\"onClickDeleteFile Params : \", atchFileId, fileSn, fileIndex);\r\n        \r\n        const formData = new FormData();\r\n        formData.set(\"atchFileId\", atchFileId);\r\n        formData.set(\"fileSn\", fileSn);\r\n        \r\n        const requestOptions = {\r\n            method: \"POST\",\r\n            headers: {\r\n                //'Content-type': 'multipart/form-data'\r\n            },\r\n            body: formData\r\n        }\r\n        EgovNet.requestFetch(\"/cmm/fms/deleteFileInfsAPI.do\",\r\n            requestOptions,\r\n            function (resp) {\r\n                console.log(\"===>>> board file delete= \" , resp);\r\n                if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\r\n                    // 성공\r\n                    console.log(\"Deleted fileIndex = \" , fileIndex);\r\n                    const _deleteFile = boardFiles.splice(fileIndex, 1);\r\n                    const _boardFiles = Object.assign([], boardFiles);\r\n                    fnDeleteFile(_boardFiles);\r\n                    alert(\"첨부파일이 삭제되었습니다.\");\r\n                    fnChangeFile({});\r\n                } else {\r\n                    alert(\"ERR : \" + resp.resultMessage);\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    function onChangeFileInput(e) {\r\n        console.log(\"===>>> e = \" + e.target.files[0]);\r\n        fnChangeFile(e.target.files[0]);\r\n    }\r\n\r\n    let filesTag = [];\r\n\r\n    if (boardFiles !== undefined) {\r\n        boardFiles.forEach(function (item, index) {\r\n            filesTag.push(\r\n                <>\r\n                    <span>\r\n                        <a key={index} href={\"#LINK\"} onClick={function (e) {\r\n                            e.preventDefault();\r\n                            onClickDownFile(item.atchFileId, item.fileSn);\r\n                        }} download>\r\n                            {item.orignlFileNm}\r\n                        </a>\r\n                        <span>\r\n                            [{item.fileMg}byte]\r\n                        </span>\r\n                    </span>\r\n                </>\r\n            );\r\n\r\n            if (mode === CODE.MODE_MODIFY) {\r\n                filesTag.push(\r\n                    <>\r\n                        <button className=\"btn btn_delete\" onClick={(e) => {\r\n                            onClickDeleteFile(item.atchFileId, item.fileSn, index);\r\n                        }}></button>\r\n                    </>\r\n                );\r\n            }\r\n            filesTag.push(<br/>);\r\n        });\r\n    }\r\n    console.log(\"filesTag : \", filesTag);\r\n    console.groupEnd(\"EgovAttachFile\");\r\n    \r\n    return (\r\n        <dl>\r\n            <dt>첨부파일</dt>\r\n            <dd>\r\n                <span className=\"file_attach\">\r\n                    {filesTag}\r\n                    {(mode === CODE.MODE_MODIFY || mode === CODE.MODE_CREATE) && <input name=\"file_0\" id=\"egovComFileUploader\" type=\"file\" onChange={e => onChangeFileInput(e)}></input>}\r\n                </span>\r\n            </dd>\r\n        </dl>\r\n    );\r\n}\r\n\r\nexport default React.memo(EgovAttachFile);"]},"metadata":{},"sourceType":"module"}