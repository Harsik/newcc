{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiflis\\\\Documents\\\\eGovFrameDev-4.0.0-64bit\\\\workspace\\\\newcc\\\\egovframe-template-simple-react\\\\src\\\\egov\\\\inform\\\\gallery\\\\EgovGalleryEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport * as EgovNet from 'context/egovFetch';\nimport URL from 'context/url';\nimport CODE from 'context/code';\nimport { GALLERY_BBS_ID } from 'context/config';\nimport { default as EgovLeftNav } from 'egov/common/leftmenu/EgovLeftNavInform';\nimport EgovAttachFile from 'egov/common/EgovAttachFile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EgovGalleryEdit(props) {\n  _s();\n\n  var _history$location$sta, _history$location$sta2;\n\n  console.group(\"EgovGalleryEdit\");\n  console.log(\"------------------------------\");\n  console.log(\"EgovGalleryEdit [props] : \", props);\n  const history = useHistory();\n  console.log(\"EgovGalleryEdit [history] : \", history);\n  const bbsId = ((_history$location$sta = history.location.state) === null || _history$location$sta === void 0 ? void 0 : _history$location$sta.bbsId) || GALLERY_BBS_ID;\n  const nttId = ((_history$location$sta2 = history.location.state) === null || _history$location$sta2 === void 0 ? void 0 : _history$location$sta2.nttId) || \"\";\n  const [modeInfo, setModeInfo] = useState({\n    mode: props.mode\n  });\n  const [masterBoard, setMasterBoard] = useState({});\n  const [boardDetail, setBoardDetail] = useState({\n    nttSj: '',\n    nttCn: ''\n  });\n  const [boardAttachFiles, setBoardAttachFiles] = useState();\n\n  const intMode = () => {\n    switch (props.mode) {\n      case CODE.MODE_CREATE:\n        setModeInfo({ ...modeInfo,\n          modeTitle: \"등록\",\n          editURL: '/cop/bbs/insertBoardArticleAPI.do'\n        });\n        break;\n\n      case CODE.MODE_MODIFY:\n        setModeInfo({ ...modeInfo,\n          modeTitle: \"수정\",\n          editURL: '/cop/bbs/updateBoardArticleAPI.do'\n        });\n        break;\n\n      case CODE.MODE_REPLY:\n        setModeInfo({ ...modeInfo,\n          modeTitle: \"답글쓰기\",\n          editURL: '/cop/bbs/replyBoardArticleAPI.do'\n        });\n        break;\n    }\n\n    retrieveDetail();\n  };\n\n  const retrieveDetail = () => {\n    if (modeInfo.mode === CODE.MODE_CREATE) {\n      // 등록이면 조회 안함\n      setBoardDetail({\n        bbsId: bbsId,\n        nttSj: \"\",\n        nttCn: \"\"\n      });\n      return;\n    }\n\n    const retrieveDetailURL = '/cop/bbs/selectBoardArticleAPI.do';\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        bbsId: bbsId,\n        nttId: nttId\n      })\n    };\n    EgovNet.requestFetch(retrieveDetailURL, requestOptions, function (resp) {\n      setMasterBoard(resp.result.brdMstrVO); // 초기 boardDetail 설정 => ( 답글 / 수정 ) 모드일때...\n\n      if (modeInfo.mode === CODE.MODE_REPLY) {\n        // 답글모드이면 RE: 붙여줌 \n        setBoardDetail({ ...resp.result.boardVO,\n          nttSj: \"RE: \" + resp.result.boardVO.nttSj,\n          nttCn: \"\",\n          inqireCo: 0,\n          atchFileId: \"\"\n        });\n      }\n\n      if (modeInfo.mode === CODE.MODE_MODIFY) {\n        setBoardDetail(resp.result.boardVO);\n      } // 초기 setBoardAttachFiles 설정 => (수정) 모드 일때...\n\n\n      if (modeInfo.mode === CODE.MODE_MODIFY) {\n        setBoardAttachFiles(resp.result.resultFiles);\n      }\n    });\n  };\n\n  const updateBoard = () => {\n    const formData = new FormData();\n\n    for (let key in boardDetail) {\n      formData.append(key, boardDetail[key]); //console.log(\"boardDetail [%s] \", key, boardDetail[key]);\n    }\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: {},\n      body: formData\n    };\n    EgovNet.requestFetch(modeInfo.editURL, requestOptions, resp => {\n      if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\n        history.push({\n          pathname: URL.INFORM_GALLERY\n        });\n      } else {\n        alert(\"ERR : \" + resp.resultMessage);\n      }\n    });\n  };\n\n  useEffect(function () {\n    intMode();\n    return function () {};\n  }, []);\n  useEffect(function () {\n    console.log(\"boardDetail, boardAttachFiles: useEffect\");\n    return function () {};\n  }, [boardDetail, boardAttachFiles]);\n  console.groupEnd(\"EgovGalleryEdit\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c_wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: URL.MAIN,\n              className: \"home\",\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: URL.INFORM,\n              children: \"\\uC54C\\uB9BC\\uB9C8\\uB2F9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: masterBoard && masterBoard.bbsNm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"layout\",\n        children: [/*#__PURE__*/_jsxDEV(EgovLeftNav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contents SITE_GALLARY_VIEW\",\n          id: \"contents\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"top_tit\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"tit_1\",\n              children: \"\\uC54C\\uB9BC\\uB9C8\\uB2F9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"tit_2\",\n            children: [masterBoard && masterBoard.bbsNm, \" \", modeInfo.modeTitle]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board_view2\",\n            children: [/*#__PURE__*/_jsxDEV(\"dl\", {\n              children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"nttSj\",\n                  children: [\"\\uC81C\\uBAA9\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"req\",\n                    children: \"\\uD544\\uC218\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 62\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"f_input2 w_full\",\n                  id: \"nttSj\",\n                  name: \"nttSj\",\n                  type: \"text\",\n                  defaultValue: boardDetail.nttSj,\n                  onChange: e => setBoardDetail({ ...boardDetail,\n                    nttSj: e.target.value\n                  }),\n                  maxLength: \"60\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"dl\", {\n              children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"nttCn\",\n                  children: [\"\\uB0B4\\uC6A9\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"req\",\n                    children: \"\\uD544\\uC218\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 62\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: \"f_txtar w_full h_200\",\n                  id: \"nttCn\",\n                  name: \"nttCn\",\n                  cols: \"30\",\n                  rows: \"10\",\n                  placeholder: \"\",\n                  defaultValue: boardDetail.nttCn,\n                  onChange: e => setBoardDetail({ ...boardDetail,\n                    nttCn: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(EgovAttachFile, {\n              fnChangeFile: attachfile => {\n                console.log(\"====>>> Changed attachfile file = \", attachfile);\n                setBoardDetail({ ...boardDetail,\n                  file_1: attachfile\n                });\n              },\n              fnDeleteFile: deletedFile => {\n                console.log(\"====>>> Delete deletedFile = \", deletedFile);\n                setBoardAttachFiles(deletedFile);\n              },\n              boardFiles: boardAttachFiles,\n              mode: props.mode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"board_btn_area\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left_col btn1\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"\",\n                  className: \"btn btn_skyblue_h46 w_100\",\n                  onClick: e => {\n                    e.preventDefault();\n                    updateBoard();\n                  },\n                  children: \"\\uC800\\uC7A5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right_col btn1\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: URL.INFORM_GALLERY,\n                  className: \"btn btn_blue_h46 w_100\",\n                  children: \"\\uBAA9\\uB85D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EgovGalleryEdit, \"9/LZfOMERGKqgex2boa0EJhh2Rw=\", false, function () {\n  return [useHistory];\n});\n\n_c = EgovGalleryEdit;\nexport default EgovGalleryEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"EgovGalleryEdit\");","map":{"version":3,"sources":["C:/Users/Tiflis/Documents/eGovFrameDev-4.0.0-64bit/workspace/newcc/egovframe-template-simple-react/src/egov/inform/gallery/EgovGalleryEdit.jsx"],"names":["React","useState","useEffect","Link","useHistory","EgovNet","URL","CODE","GALLERY_BBS_ID","default","EgovLeftNav","EgovAttachFile","EgovGalleryEdit","props","console","group","log","history","bbsId","location","state","nttId","modeInfo","setModeInfo","mode","masterBoard","setMasterBoard","boardDetail","setBoardDetail","nttSj","nttCn","boardAttachFiles","setBoardAttachFiles","intMode","MODE_CREATE","modeTitle","editURL","MODE_MODIFY","MODE_REPLY","retrieveDetail","retrieveDetailURL","requestOptions","method","headers","body","JSON","stringify","requestFetch","resp","result","brdMstrVO","boardVO","inqireCo","atchFileId","resultFiles","updateBoard","formData","FormData","key","append","Number","resultCode","RCV_SUCCESS","push","pathname","INFORM_GALLERY","alert","resultMessage","groupEnd","MAIN","INFORM","bbsNm","e","target","value","attachfile","file_1","deletedFile","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport * as EgovNet from 'context/egovFetch';\r\nimport URL from 'context/url';\r\nimport CODE from 'context/code';\r\nimport { GALLERY_BBS_ID } from 'context/config';\r\n\r\nimport { default as EgovLeftNav } from 'egov/common/leftmenu/EgovLeftNavInform';\r\nimport EgovAttachFile from 'egov/common/EgovAttachFile';\r\n\r\nfunction EgovGalleryEdit(props) {\r\n    console.group(\"EgovGalleryEdit\");\r\n    console.log(\"------------------------------\");\r\n    console.log(\"EgovGalleryEdit [props] : \", props);\r\n\r\n    const history = useHistory();\r\n    console.log(\"EgovGalleryEdit [history] : \", history);\r\n\r\n    const bbsId = history.location.state?.bbsId || GALLERY_BBS_ID;\r\n    const nttId = history.location.state?.nttId || \"\";\r\n\r\n    const [modeInfo, setModeInfo] = useState({ mode: props.mode });\r\n    const [masterBoard, setMasterBoard] = useState({});\r\n    const [boardDetail, setBoardDetail] = useState({ nttSj: '', nttCn: '' });\r\n    const [boardAttachFiles, setBoardAttachFiles] = useState();\r\n\r\n    const intMode = () => {\r\n        switch (props.mode) {\r\n            case CODE.MODE_CREATE:\r\n                setModeInfo({\r\n                    ...modeInfo,\r\n                    modeTitle: \"등록\",\r\n                    editURL: '/cop/bbs/insertBoardArticleAPI.do'\r\n                });\r\n                break;\r\n            case CODE.MODE_MODIFY:\r\n                setModeInfo({\r\n                    ...modeInfo,\r\n                    modeTitle: \"수정\",\r\n                    editURL: '/cop/bbs/updateBoardArticleAPI.do'\r\n                });\r\n                break;\r\n            case CODE.MODE_REPLY:\r\n                setModeInfo({\r\n                    ...modeInfo,\r\n                    modeTitle: \"답글쓰기\",\r\n                    editURL: '/cop/bbs/replyBoardArticleAPI.do'\r\n                });\r\n                break;\r\n        }\r\n        retrieveDetail();\r\n    }\r\n\r\n    const retrieveDetail = () => {\r\n\r\n        if (modeInfo.mode === CODE.MODE_CREATE) {// 등록이면 조회 안함\r\n            setBoardDetail({ bbsId: bbsId, nttSj: \"\", nttCn: \"\" });\r\n            return;\r\n        }\r\n\r\n        const retrieveDetailURL = '/cop/bbs/selectBoardArticleAPI.do';\r\n        const requestOptions = {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                bbsId: bbsId,\r\n                nttId: nttId\r\n            })\r\n        }\r\n        EgovNet.requestFetch(retrieveDetailURL,\r\n            requestOptions,\r\n            function (resp) {\r\n                setMasterBoard(resp.result.brdMstrVO);\r\n                \r\n                // 초기 boardDetail 설정 => ( 답글 / 수정 ) 모드일때...\r\n                if (modeInfo.mode === CODE.MODE_REPLY) {// 답글모드이면 RE: 붙여줌 \r\n                    setBoardDetail({ ...resp.result.boardVO, nttSj: \"RE: \" + resp.result.boardVO.nttSj, nttCn: \"\" , inqireCo: 0, atchFileId: \"\"});\r\n                }\r\n                if (modeInfo.mode === CODE.MODE_MODIFY) {\r\n                    setBoardDetail(resp.result.boardVO);\r\n                }\r\n                \r\n                // 초기 setBoardAttachFiles 설정 => (수정) 모드 일때...\r\n                if (modeInfo.mode === CODE.MODE_MODIFY) {\r\n                    setBoardAttachFiles(resp.result.resultFiles);\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    const updateBoard = () => {\r\n        const formData = new FormData();\r\n        for (let key in boardDetail) {\r\n            formData.append(key, boardDetail[key]);\r\n            //console.log(\"boardDetail [%s] \", key, boardDetail[key]);\r\n        }\r\n        \r\n        const requestOptions = {\r\n            method: \"POST\",\r\n            headers: {\r\n\r\n            },\r\n            body: formData\r\n        }\r\n\r\n        EgovNet.requestFetch(modeInfo.editURL,\r\n            requestOptions,\r\n            (resp) => {\r\n                if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\r\n                    history.push({ pathname: URL.INFORM_GALLERY });\r\n                } else {\r\n                    alert(\"ERR : \" + resp.resultMessage);\r\n                }\r\n\r\n            }\r\n        );\r\n    }\r\n\r\n    useEffect(function () {\r\n        intMode();\r\n        return function () {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(function () {\r\n        console.log(\"boardDetail, boardAttachFiles: useEffect\");\r\n        return function () {\r\n        }\r\n    }, [boardDetail,boardAttachFiles]);\r\n\r\n    console.groupEnd(\"EgovGalleryEdit\");\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"c_wrap\">\r\n                {/* <!-- Location --> */}\r\n                <div className=\"location\">\r\n                    <ul>\r\n                    <li><Link to={URL.MAIN} className=\"home\">Home</Link></li>\r\n                        <li><Link to={URL.INFORM}>알림마당</Link></li>\r\n                        <li>{masterBoard && masterBoard.bbsNm}</li>\r\n                    </ul>\r\n                </div>\r\n                {/* <!--// Location --> */}\r\n\r\n                <div className=\"layout\">\r\n                    {/* <!-- Navigation --> */}\r\n                    <EgovLeftNav></EgovLeftNav>\r\n                    {/* <!--// Navigation --> */}\r\n\r\n                    <div className=\"contents SITE_GALLARY_VIEW\" id=\"contents\">\r\n                        {/* <!-- 본문 --> */}\r\n\r\n                        <div className=\"top_tit\">\r\n                            <h1 className=\"tit_1\">알림마당</h1>\r\n                        </div>\r\n\r\n                        <h2 className=\"tit_2\">{masterBoard && masterBoard.bbsNm} {modeInfo.modeTitle}</h2>\r\n\r\n                        <div className=\"board_view2\">\r\n                            <dl>\r\n                                <dt>\r\n                                    <label htmlFor=\"nttSj\">제목<span className=\"req\">필수</span></label>\r\n                                </dt>\r\n                                <dd>\r\n                                    <input className=\"f_input2 w_full\" id=\"nttSj\" name=\"nttSj\" type=\"text\"\r\n                                        defaultValue={boardDetail.nttSj}\r\n                                        onChange={e => setBoardDetail({ ...boardDetail, nttSj: e.target.value })}\r\n                                        maxLength=\"60\" />\r\n                                </dd>\r\n                            </dl>\r\n                            <dl>\r\n                                <dt><label htmlFor=\"nttCn\">내용<span className=\"req\">필수</span></label></dt>\r\n                                <dd>\r\n                                    <textarea className=\"f_txtar w_full h_200\" id=\"nttCn\" name=\"nttCn\" cols=\"30\" rows=\"10\" placeholder=\"\"\r\n                                        defaultValue={boardDetail.nttCn}\r\n                                        onChange={e => setBoardDetail({ ...boardDetail, nttCn: e.target.value })}></textarea>\r\n                                </dd>\r\n                            </dl>\r\n                            <EgovAttachFile\r\n                                fnChangeFile={(attachfile) => {\r\n                                    console.log(\"====>>> Changed attachfile file = \", attachfile);\r\n                                    setBoardDetail({ ...boardDetail, file_1: attachfile });\r\n                                }}\r\n                                fnDeleteFile={(deletedFile) => {\r\n                                    console.log(\"====>>> Delete deletedFile = \", deletedFile);\r\n                                    setBoardAttachFiles(deletedFile);\r\n                                }}\r\n                                boardFiles={boardAttachFiles}\r\n                                mode={props.mode} />\r\n\r\n\r\n                            {/* <!-- 버튼영역 --> */}\r\n                            <div className=\"board_btn_area\">\r\n                                <div className=\"left_col btn1\">\r\n                                    <a href=\"\" className=\"btn btn_skyblue_h46 w_100\"\r\n                                        onClick={(e) => {\r\n                                            e.preventDefault();\r\n                                            updateBoard();\r\n                                        }}>저장</a>\r\n                                </div>\r\n\r\n                                <div className=\"right_col btn1\">\r\n                                    <a href={URL.INFORM_GALLERY} className=\"btn btn_blue_h46 w_100\">목록</a>\r\n                                </div>\r\n                            </div>\r\n                            {/* <!--// 버튼영역 --> */}\r\n                        </div>\r\n\r\n                        {/* <!--// 본문 --> */}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EgovGalleryEdit;"]},"metadata":{},"sourceType":"module"}